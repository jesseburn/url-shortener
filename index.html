<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Frontend Mentor | Shortly URL shortening API Challenge</title>
  <link rel="stylesheet" href="./styles/output.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
    integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js"
    integrity="sha512-sIqUEnRn31BgngPmHt2JenzleDDsXwYO+iyvQ46Mw6RL+udAUZj2n/u/PGY80NxRxynO7R9xIGx5LEzw4INWJQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/garlic.js/1.4.1/garlic.min.js"
    integrity="sha512-UWthFfLTzUb9PtiaLyf8Z9HD0NzXoZ++0+qBwD+CGnehBBLWgz+t2p3xL08lrkmnB1pLsjkQcoTOzsiRgwJmxw=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<style>
  html,
  body {
    max-width: 100%;
    overflow-x: hidden;
  }

  body {
    font-family: 'Poppins', sans-serif;
  }

  @media only screen and (max-width: 1024px) {
    .border-top-white {
      border-top: 2px solid #71717A;
    }
  }

  #form,
  .bg-2 {
    background-image: url("./images/bg-shorten-desktop.svg");
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
  }
</style>

<body class="flex flex-col">
  <header class="flex flex-row w-full px-6 pt-3 md:px-24 sm:pt-6">
    <nav class="flex flex-col justify-between w-full ml-0 lg:flex-row sm:items-start">
      <img src="./images/logo.svg" alt="Shortly"
        class="object-contain object-center h-auto max-w-45p w-40p md:w-20p lg:w-auto" aria-label="Shortly">
      <div
        class="relative flex flex-col hidden w-full text-lg text-center rounded-lg lg:flex mt-5p px-5p pb-10p md:pb-5p lg:p-0 lg:text-base lg:mt-0 bg-primary2 lg:bg-white pt-5p lg:items-center lg:justify-start lg:flex-row text-neutral-50 lg:text-zinc-500">
        <a href="" aria-label="Features" class="px-0 lg:px-5p lg:hover:text-primary2">Features</a>
        <a href="" aria-label="Pricing" class="py-3p lg:py-0 lg:hover:text-primary2">Pricing</a>
        <a href="" aria-label="Resources" class="pb-3p lg:pl-5p lg:pr-35p lg:py-0 lg:hover:text-primary2">Resources</a>
        <a href="" aria-label="Login"
          class="w-full py-5p md:py-3p lg:py-0 lg:w-auto border-top-white lg:p-0 lg:text-zinc-500 lg:hover:text-primary2">Login</a>
        <button
          class="w-full rounded-full lg:w-1/6 lg:h-10 lg:ml-12 lg:p-1 p-2p bg-primary1 text-neutral-50 hover:bg-cyan-300">
          Sign Up
        </button>
      </div>
      <img src="./images/icon-hamburger.svg" alt="mobile nav open" aria-label="mobile nav open"
        class="absolute object-contain object-center w-6 h-7 left-80p lg:hidden ham">
      <img src="./images/icon-close.svg" alt="mobile nav close" aria-label="mobile nav close"
        class="absolute hidden object-contain object-center w-6 h-7 left-80p close">
    </nav>
  </header>
  <section class="flex flex-col-reverse justify-around w-full px-6 pt-4 md:flex-row sm:px-24 md:pt-6 lg:pt-12"
    role="main">
    <div class="flex flex-col items-center text-center sm:items-start sm:text-left">
      <h1 class="pt-3 text-3xl font-bold sm:pt-0 md:text-4xl lg:text-6xl text-neutral-700">More than just shorter links
      </h1>
      <p class="px-2 pt-2 lg:pr-5p sm:px-0 text-zinc-500">Build your brand’s recognition and get detailed insights
        on how your links are performing.</p>
      <button
        class="w-1/2 h-10 mt-6 text-sm rounded-full sm:w-32 bg-primary1 text-neutral-50 hover:bg-cyan-300">
        Get Started
      </button>
    </div>
    <figure class="w-96 md:w-screen lg:w-3/4">
      <img src="./images/illustration-working.svg" alt="illustration-working" aria-label="illustration-working"
        class="object-contain object-center overflow-visible md:ml-50p lg:ml-40">
    </figure>
  </section>
  <div id="form"
    class="z-50 flex flex-col p-4 mx-6 mt-6 border-none rounded-lg md:p-4 sm:flex-row lg:p-12 sm:mx-24 bg-primary2">
    <input type="text" name="shorten" placeholder="Shorten a link here..."
      aria-label="Shorten a link here" class="w-full h-10 pl-3 border-none rounded-lg sm:w-3/4 sm:h-auto sm:p-3 sm:mr-6"
      id="form-text">
    <p id="error" class="absolute hidden text-sm text-red-600 sm:ml-2 sm:mt-14">Please add a link</p>
    <button
      class="w-full h-10 mt-3 text-sm border-none rounded-lg sm:mt-0 sm:w-32 sm:h-12 bg-primary1 text-neutral-50 hover:bg-cyan-300"
      id="form-btn">Shorten It!</button>
    <div id="result"></div>
  </div>
  <section class="z-0 flex flex-col pt-32 pb-16 -mt-16 bg-gray-100 md:-mt-5p md:pt-32 lg:pt-48 sm:pb-28">
    <div class="items-center text-center">
      <h2 class="text-2xl font-semibold sm:text-3xl text-neutral-700">Advanced Statistics</h2>
      <p class="w-full pt-2 text-base md:px-15p lg:px-30p text-zinc-500">Track how your links are performing
        across the web with our advanced statistics dashboard.</p>
    </div>
    <div class="relative flex flex-col w-full px-6 pt-10 lg:flex-row sm:px-24 md:pt-14 lg:pt-20">
      <div class="relative z-50 w-full bg-white border-none rounded h-52 lg:w-1/3 lg:h-56 sm:px-10 sm:pt-12 sm:mr-12">
        <div class="absolute p-3 rounded-full -mt-10p md:-mt-12p ml-40p lg:ml-0 lg:-mt-20 w-14 h-14 bg-primary2">
          <img src="./images/icon-brand-recognition.svg" alt="icon-brand-recognition"
            aria-label="icon-brand-recognition" class="object-contain object-center">
        </div>
        <h3 class="pt-12 text-lg font-semibold text-center sm:pt-0 lg:text-left text-neutral-700">Brand Recognition</h3>
        <p class="px-3 pt-4 text-sm text-center sm:px-0 lg:text-left text-zinc-500">Boost your brand recognition with
          each click. Generic links don’t
          mean a thing. Branded links help instil confidence in your content.</p>
      </div>
      <div
        class="z-50 w-full mt-10 bg-white border-none rounded h-52 lg:w-1/3 lg:h-56 sm:px-10 md:mt-10p sm:pt-12 lg:mt-12 sm:mr-12">
        <div
          class="absolute p-3 rounded-full -mt-10p md:-mt-10p md:ml-30p ml-35p lg:-mt-20 lg:ml-0 w-14 h-14 bg-primary2">
          <img src="./images/icon-detailed-records.svg" alt="icon-detailed-records" aria-label="icon-detailed-records"
            class="object-contain object-center">
        </div>
        <h3 class="pt-12 text-lg font-semibold text-center sm:pt-0 lg:text-left text-neutral-700">Detailed Records</h3>
        <p class="px-3 pt-4 text-sm text-center sm:px-0 lg:text-left text-zinc-500">Gain insights into who is clicking
          your links. Knowing when and where
          people engage with your content helps inform better decisions.</p>
      </div>
      <div
        class="z-50 w-full mt-10 bg-white border-none rounded h-52 lg:w-1/3 lg:h-56 sm:px-10 md:mt-10p lg:pt-12 lg:mt-24 sm:mr-12">
        <div
          class="absolute p-3 rounded-full ml-35p -mt-10p md:-mt-3p md:ml-30p lg:-mt-20 lg:ml-0 w-14 h-14 bg-primary2">
          <img src="./images/icon-fully-customizable.svg" alt="icon-fully-customizable"
            aria-label="icon-fully-customizable" class="object-contain object-center">
        </div>
        <h3 class="pt-12 text-lg font-semibold text-center lg:pt-0 lg:text-left text-neutral-700">Fully Customizable
        </h3>
        <p class="px-3 pt-4 text-sm text-center sm:px-0 lg:text-left text-zinc-500">Improve brand awareness and content
          discoverability through customizable
          links, supercharging audience engagement.</p>
      </div>
      <span class="z-0 hidden lg:block lg:absolute sm:w-1/2 sm:h-2 sm:ml-64 sm:mt-36 bg-primary1"></span>
    </div>
  </section>
  <div class="flex flex-col items-center justify-center py-10 text-center bg-2 bg-primary2 text-neutral-50">
    <h4 class="font-semibold text-2lg sm:text-3xl">Boost your links today</h4>
    <button class="h-10 mt-3 text-sm border-none rounded-full w-36 sm:w-32 sm:mt-6 bg-primary1 hover:bg-cyan-300">Get
      Started</button>
  </div>
  <footer
    class="flex flex-col items-center w-full py-6 text-center sm:text-left sm:items-start sm:flex-row md:px-24 sm:py-12 text-neutral-50 bg-neutral2">
    <div class="sm:w-1/4 lg:m-0 md:mr-2p">
      <img src="./images/logo.svg" alt="Shortly" aria-label="Shortly" class="invert">
    </div>
    <div class="flex flex-col pt-3 md:mr-5p lg:m-0 sm:pt-0 sm:w-1/4 justify-evenly">
      <h5 class="pb-1 font-semibold sm:pb-3">Features</h5>
      <a href="" aria-label="" class="mt-1 sm:mt-0 hover:text-primary1">Link Shortening</a>
      <a href="" aria-label="" class="mt-1 sm:mt-0 hover:text-primary1">Branded Links</a>
      <a href="" aria-label="" class="mt-1 sm:mt-0 hover:text-primary1">Analytics</a>
    </div>
    <div class="flex flex-col pt-3 sm:pt-0 lg:m-0 md:mr-2p sm:w-1/4 justify-evenly">
      <h5 class="pb-1 font-semibold sm:pb-3">Resources</h5>
      <a href="" aria-label="" class="mt-1 sm:mt-0 hover:text-primary1">Blog</a>
      <a href="" aria-label="" class="mt-1 sm:mt-0 hover:text-primary1">Developers</a>
      <a href="" aria-label="" class="mt-1 sm:mt-0 hover:text-primary1">Support</a>
    </div>
    <div class="flex flex-col pt-3 sm:pt-0 sm:w-1/4 justify-evenly">
      <h5 class="pb-1 font-semibold sm:pb-3">Company</h5>
      <a href="" aria-label="" class="mt-1 sm:mt-0 hover:text-primary1">Abouts</a>
      <a href="" aria-label="" class="mt-1 sm:mt-0 hover:text-primary1">Our Team</a>
      <a href="" aria-label="" class="mt-1 sm:mt-0 hover:text-primary1">Careers</a>
      <a href="" aria-label="" class="mt-1 sm:mt-0 hover:text-primary1">Contact</a>
    </div>
    <div class="flex flex-row pt-3 sm:pt-0 sm:w-1/4">
      <i class="mr-3 text-2xl fab fa-facebook-square hover:text-primary1"></i>
      <i class="mr-3 text-2xl fab fa-twitter-square hover:text-primary1"></i>
      <i class="mr-3 text-2xl fab fa-instagram hover:text-primary1"></i>
      <i class="text-3xl fab fa-tiktok hover:text-primary1"></i>
    </div>
  </footer>
  <script>
    $(document).ready(function () {

      $("#form-btn").on("click", function (e) {
        $("#form").garlic();


        //console.log('buttton clicked');
        e.preventDefault();
        let result = document.getElementById("result");
        let longUrl = $("#form-text").val();

        /* https://googlechrome.github.io/samples/fetch-api/fetch-post.html
            Fetch API post request to get information for url shortener */
        fetch(`https://api.shrtco.de/v2/shorten?url=${longUrl}`)
          .then(response => {
            // if the res if 400 the error message will display
            if (response.status == 400) {
              $("#form-text").css("border", "3px solid hsl(0, 94%, 66%)");
              $("#error").css("display", "block");
              $("#form-text").focus();
              return;
            } else {
              $("#error").css("display", "none");
              $("#form-text").css("border", "none");
              $("#form-text").focus();
              return response.json();
            }
          })
          // promises returned create output box for shortened url along with a copy btn
          .then(data => {
            if (data === undefined) {
              return;
            }

            let output = document.createElement("div");
            const outputBox = document.createElement("input");
            const shortUrl = document.createElement("input");
            const copyBtn = document.createElement("button");
            $(".output").garlic();

            $(copyBtn).attr({
              "type": "button",
              "data-clipboard-target": "#copy-target",
              "class": "copy-btn",
              "id": "copy-button"
            });
            $(output).attr({
              "class": "output",
              "readonly": true
            });
            $(outputBox).attr({
              "class": "output-box",
              "readonly": true
            });
            $(shortUrl).attr({
              "class": "short-url",
              "id": "copy-target",
              "readonly": true
            });
            copyBtn.textContent = "Copy";
            //console.log(data);
            outputBox.value = `${$("#form-text").val()}`;
            shortUrl.value = `${data.result.full_short_link}`;
            output.appendChild(outputBox);
            output.appendChild(shortUrl);
            output.appendChild(copyBtn);
            result.appendChild(output);

            // styles for output and btn

            $(".output").css({
              "width": "86%",
              "height": "3rem",
              "display": "flex",
              "justify-content": "space-between",
              "background-color": "#ffffff",
              "align-items": "center",
              "position": "absolute",
              "top": "120%",
              "left": "7%",
              "padding": "1%",
              "border-radius": "9px"
            });
            $(".output-box").css({
              "width": "50%",
              "border": "none",
              "font-size": "1rem"
            });
            $(".short-url").css({
              "width": "20%",
              "border": "none",
              "font-size": "1rem",
              "color": "hsl(180, 66%, 49%)"
            });
            $(".copy-btn").css({
              "background-color": "hsl(180, 66%, 49%)",
              "width": "7rem",
              "height": "2.5rem",
              "color": "#ffffff",
              "border": "none",
              "border-radius": "9px",
              "font-size": "1rem"
            });
            // copy btn
            $(copyBtn).on("click", function (e) {
              new ClipboardJS("#copy-button");
              $(copyBtn).css("background-color", "hsl(257, 27%, 26%)");
              e.target.innerHTML = "Copied!";
              //console.log("you copied it!");

              let timeout = setTimeout(function () {
                $(copyBtn).css("background-color", "hsl(180, 66%, 49%)");
                copyBtn.textContent = "Copy";
                //console.log(e.target);
              }, 300)
              // new ClipboardJS("#copy-button");
            });

          }).catch(
            error => {
              console.log(error);
            }
          )

        // local storage
        $(window).on("load", function (e) {
          setTimeout(function () {
            if (localStorage.key(0) != null) {
              $("#form-btn").click();
            } else {
              console.log("Error-You need local storage");
            }
          }, 10);
        });
      });

      // mobile nav
      $(".ham").click(function () {
        $("nav").children("div").toggleClass("hidden");
        $(".close").toggleClass("hidden");
        $(".ham").toggleClass("hidden");
      });

      $(".close").click(function () {
        if ($("nav").children("div").hasClass("hidden")) {

          $("nav").children("div").removeClass("hidden");
        } else {
          $(".close").toggleClass("hidden");
          $(".ham").toggleClass("hidden");
          $("nav").children("div").addClass("hidden");
        }
      });
    });


  </script>
</body>

</html>
